#/***************************************************************************
#
# YAM - Yet Another Mailer
# Copyright (C) 1995-2000 by Marcel Beck <mbeck@yam.ch>
# Copyright (C) 2000-2006 by YAM Open Source Team
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
#
# YAM Official Support Site :  http://www.yam.ch
# YAM OpenSource project    :  http://sourceforge.net/projects/yamos/
#
# $Id$
#
#***************************************************************************/

TARGET	= YAM

#

CC	= vc
RM	= delete quiet
FC	= flexcat
FLEX	= flex
CDEFS	= `rx "say '-D__YAM_VERDATE=' || '22'x || right(date(S),2)*1'.'substr(date(S),5,2)*1'.'left(date(S),4) || '22'x || ' -D__YAM_VERDAYS=' || date('I')"`
CFLAGS	= -I. -Iinclude -Iinclude/netinclude -+ -c
LDFLAGS	= 
LDLIBS	= -lextra -lmui

GENCLASSES = extrasrc/genclasses/GenClasses

#

OBJS	= YAM_global.o YAM.o YAM_AB.o YAM_CO.o YAM_COg.o YAM_COs.o YAM_DI.o YAM_EA.o \
	  YAM_ER.o YAM_FI.o YAM_FO.o YAM_locale.o YAM_MA.o YAM_MAf.o YAM_md5.o \
	  YAM_MI.o YAM_mail_lex.o YAM_RE.o YAM_rexx.o YAM_rexx_rxcl.o YAM_rexx_rxif.o \
	  YAM_TR.o YAM_US.o YAM_UT.o YAM_WR.o ImageCache.o $(CLASSES) all_vbcc.o Debug.o

CLASSES	= classes/Classes.o classes/Recipientstring.o classes/Searchwindow.o \
	  classes/SearchControlGroup.o \
	  classes/AddrBookEntryList.o classes/AddrBookListtree.o classes/Addrmatchlist.o \
	  classes/Aboutwindow.o classes/AttachmentGroup.o classes/AttachmentImage.o \
	  classes/ConfigPageList.o \
	  classes/ReadMailGroup.o classes/ReadWindow.o classes/Splashwindow.o \
	  classes/StatusIconGroup.o \
	  classes/UserImage.o classes/MailTextEdit.o classes/MainFolderListtree.o \
	  classes/MainMailList.o classes/MainMailListGroup.o classes/MainWindow.o \
	  classes/InfoBar.o classes/WriteAttachmentList.o classes/QuickSearchBar.o \
	  classes/ImageArea.o classes/TransferMailList.o \
	  classes/YAM.o

#

all: $(TARGET)

#

.c.o:
	$(CC) $(CFLAGS) $< -o $@

#

$(TARGET): $(OBJS)
	$(CC) $(LDFLAGS) -o $@ $(OBJS) $(LDLIBS)

clean:
	-$(RM) $(TARGET) $(OBJS) YAM_locale.? YAM_mail_lex.c classes/Classes.? classes/*_cl.h

## AUTOGEN TOOLS ######################

classinfo: genclasses
	@$(GENCLASSES) classes -b$(TARGET) -gpl -storm -iClassesExtra.h

genclasses: extrasrc/genclasses/gc.c extrasrc/genclasses/gc.h extrasrc/genclasses/lists.c extrasrc/genclasses/lists.h
	@(cd extrasrc/genclasses && $(MAKE))

## MAIN DEPENDENCIES ##################

YAM.o:	YAM.c YAM.h YAM_addressbook.h YAM_addressbookEntry.h \
	YAM_config.h YAM_configFile.h YAM_find.h YAM_folderconfig.h \
	YAM_global.h include/SDI_hook.h YAM_locale.h YAM_main.h YAM_mainFolder.h \
	YAM_read.h YAM_rexx.h YAM_rexx_rxif.h YAM_stringsizes.h YAM_transfer.h \
	YAM_userlist.h YAM_utilities.h YAM_write.h

YAM_AB.o: YAM_AB.c YAM.h YAM_addressbook.h YAM_addressbookEntry.h \
	YAM_config.h YAM_error.h YAM_find.h YAM_global.h \
	include/SDI_hook.h YAM_locale.h YAM_main.h YAM_mainFolder.h YAM_rexx_rxif.h \
	YAM_stringsizes.h YAM_transfer.h YAM_userlist.h YAM_utilities.h YAM_write.h

YAM_CO.o: YAM_CO.c YAM.h YAM_addressbook.h YAM_addressbookEntry.h \
	YAM_config.h YAM_configFile.h YAM_configGUI.h YAM_error.h \
	YAM_find.h YAM_folderconfig.h YAM_global.h include/SDI_hook.h YAM_locale.h \
	YAM_main.h YAM_mainFolder.h YAM_rexx_rxif.h YAM_stringsizes.h \
	YAM_transfer.h YAM_userlist.h YAM_utilities.h

YAM_COg.o: YAM_COg.c YAM.h YAM_config.h YAM_find.h \
	 YAM_global.h include/SDI_hook.h YAM_locale.h YAM_main.h YAM_mainFolder.h \
	 YAM_mime.h YAM_rexx_rxif.h YAM_stringsizes.h YAM_transfer.h YAM_userlist.h \
	 YAM_utilities.h

YAM_COs.o: YAM_COs.c YAM.h YAM_config.h YAM_error.h YAM_find.h \
	 YAM_folderconfig.h YAM_global.h YAM_locale.h YAM_mainFolder.h \
	 YAM_rexx_rxif.h YAM_stringsizes.h YAM_transfer.h YAM_userlist.h \
	 YAM_utilities.h

YAM_DI.o: YAM_DI.c YAM.h YAM_error.h YAM_glossarydisplay.h \
	include/SDI_hook.h YAM_locale.h YAM_rexx_rxif.h YAM_stringsizes.h YAM_transfer.h \
	YAM_userlist.h YAM_utilities.h YAM_write.h

YAM_EA.o: YAM_EA.c YAM.h YAM_addressbook.h YAM_addressbookEntry.h \
	YAM_config.h YAM_error.h YAM_find.h include/SDI_hook.h \
	YAM_locale.h YAM_mainFolder.h YAM_rexx_rxif.h YAM_stringsizes.h \
	YAM_transfer.h YAM_userlist.h YAM_utilities.h

YAM_ER.o: YAM_ER.c YAM.h YAM_config.h YAM_error.h YAM_find.h include/SDI_hook.h \
	YAM_locale.h YAM_main.h YAM_mainFolder.h YAM_rexx_rxif.h YAM_stringsizes.h \
	YAM_transfer.h YAM_userlist.h YAM_utilities.h

YAM_FI.o: YAM_FI.c YAM.h YAM_config.h YAM_configFile.h YAM_error.h \
	YAM_find.h YAM_folderconfig.h YAM_global.h include/SDI_hook.h YAM_locale.h \
	YAM_main.h YAM_mainFolder.h YAM_read.h YAM_rexx_rxif.h YAM_stringsizes.h \
	YAM_transfer.h YAM_userlist.h YAM_utilities.h YAM_write.h

YAM_FO.o: YAM_FO.c YAM.h YAM_error.h \
	YAM_folderconfig.h YAM_global.h include/SDI_hook.h YAM_locale.h YAM_main.h \
	YAM_mainFolder.h YAM_rexx_rxif.h YAM_stringsizes.h YAM_transfer.h \
	YAM_userlist.h YAM_utilities.h

YAM_global.o: YAM_global.c YAM_global.h YAM_locale.h YAM_stringsizes.h
	$(CC) $(CDEFS) $(CFLAGS) $<

YAM_MA.o: YAM_MA.c YAM.h YAM_addressbook.h YAM_addressbookEntry.h \
	YAM_config.h YAM_error.h YAM_find.h \
	YAM_folderconfig.h YAM_global.h include/SDI_hook.h YAM_locale.h YAM_main.h \
	YAM_mainFolder.h YAM_read.h YAM_rexx.h YAM_rexx_rxif.h YAM_stringsizes.h \
	YAM_transfer.h YAM_userlist.h YAM_utilities.h YAM_write.h

YAM_MAf.o: YAM_MAf.c YAM.h YAM_config.h YAM_find.h \
	 YAM_folderconfig.h YAM_global.h include/SDI_hook.h YAM_locale.h YAM_main.h \
	 YAM_mainFolder.h YAM_read.h YAM_rexx.h YAM_rexx_rxif.h YAM_stringsizes.h \
	 YAM_transfer.h YAM_userlist.h YAM_utilities.h YAM_write.h

YAM_md5.o: YAM_md5.c YAM_md5.h

YAM_MI.o: YAM_MI.c YAM_error.h YAM_locale.h YAM_mime.h YAM_stringsizes.h \
	YAM_utilities.h

YAM_mail_lex.o: YAM_mail_lex.c
YAM_mail_lex.c: YAM_mail_lex.l YAM_mail_lex.h
	$(FLEX) -Cem -i -t YAM_mail_lex.l > $@

YAM_RE.o: YAM_RE.c YAM.h YAM_addressbook.h YAM_addressbookEntry.h \
	YAM_config.h YAM_error.h YAM_find.h \
	YAM_folderconfig.h include/SDI_hook.h YAM_global.h YAM_locale.h YAM_main.h \
	YAM_mainFolder.h YAM_mime.h YAM_read.h YAM_rexx_rxif.h YAM_stringsizes.h \
	YAM_transfer.h YAM_userlist.h YAM_utilities.h YAM_write.h

YAM_rexx.o: YAM_rexx.c YAM_rexx.h YAM_rexx_rxcl.h YAM_rexx_rxif.h

YAM_rexx_rxcl.o: YAM_rexx_rxcl.c YAM_rexx_rxcl.h YAM_rexx_rxif.h

YAM_rexx_rxif.o: YAM_rexx_rxif.c YAM.h YAM_addressbook.h \
	YAM_addressbookEntry.h YAM_config.h YAM_find.h YAM_folderconfig.h \
	YAM_global.h YAM_locale.h YAM_main.h YAM_mainFolder.h YAM_read.h \
	YAM_rexx_rxcl.h YAM_rexx_rxif.h YAM_stringsizes.h YAM_transfer.h \
	YAM_userlist.h YAM_utilities.h YAM_write.h

YAM_TR.o: YAM_TR.c YAM.h YAM_addressbookEntry.h YAM_config.h YAM_error.h \
	YAM_find.h YAM_folderconfig.h YAM_global.h include/SDI_hook.h YAM_locale.h \
	YAM_main.h YAM_mainFolder.h YAM_md5.h YAM_mime.h YAM_rexx_rxif.h \
	YAM_stringsizes.h YAM_transfer.h YAM_userlist.h YAM_utilities.h

YAM_US.o: YAM_US.c YAM.h YAM_config.h YAM_error.h YAM_find.h include/SDI_hook.h \
	YAM_locale.h YAM_mainFolder.h YAM_rexx_rxif.h YAM_stringsizes.h \
	YAM_transfer.h YAM_userlist.h YAM_utilities.h

YAM_UT.o: YAM_UT.c YAM.h YAM_config.h YAM_error.h \
	YAM_find.h YAM_folderconfig.h YAM_global.h include/SDI_hook.h YAM_locale.h \
	YAM_main.h YAM_mainFolder.h YAM_mime.h YAM_read.h YAM_rexx_rxif.h \
	YAM_stringsizes.h YAM_transfer.h YAM_userlist.h YAM_utilities.h \
	YAM_write.h

YAM_WR.o: YAM_WR.c YAM.h YAM_addressbook.h YAM_addressbookEntry.h \
	YAM_config.h YAM_error.h YAM_find.h \
	YAM_folderconfig.h YAM_global.h YAM_glossarydisplay.h include/SDI_hook.h \
	YAM_locale.h YAM_main.h YAM_mainFolder.h YAM_mime.h YAM_read.h \
	YAM_rexx_rxif.h YAM_stringsizes.h YAM_transfer.h YAM_userlist.h \
	YAM_utilities.h YAM_write.h

all_vbcc.o: all_vbcc.c extrasrc/stccpy.c \
	extrasrc/stcgfe.c extrasrc/strmfp.c extrasrc/strsfn.c \
	extrasrc/NewReadArgs.c extrasrc/dice.c extrasrc/strdup.c

YAM_locale.h: YAM_locale.c
YAM_locale.c: /locale/YAM.cd C_h.sd C_c.sd
	$(FC) /locale/YAM.cd YAM_locale.h=C_h.sd YAM_locale.c=C_c.sd

## CLASS DEPENDENCIES #################

classes/ReadMailGroup.o: classes/ReadMailGroup.c classes/ReadMailGroup_cl.h

classes/ReadWindow.o: classes/ReadWindow.c classes/ReadWindow_cl.h

classes/UserImage.o: classes/UserImage.c classes/UserImage_cl.h

classes/ConfigPageList.o: classes/ConfigPageList.c classes/ConfigPageList_cl.h

classes/BodychunkImage.o: classes/BodychunkImage.c classes/BodychunkImage_cl.h

classes/WriteAttachmentList.o: classes/WriteAttachmentList.c classes/WriteAttachmentList_cl.h

classes/QuickSearchBar.o: classes/QuickSearchBar.c classes/QuickSearchBar_cl.h

classes/MainFolderListtree.o: classes/MainFolderListtree.c classes/MainFolderListtree_cl.h

classes/MainMailList.o: classes/MainMailList.c classes/MainMailList_cl.h

classes/MainMailListGroup.o: classes/MainMailListGroup.c classes/MainMailListGroup_cl.h

classes/AddrBookEntryList.o: classes/AddrBookEntryList.c classes/AddrBookEntryList_cl.h

classes/AddrBookListtree.o: classes/AddrBookListtree.c classes/AddrBookListtree_cl.h

classes/MainWindow.o: classes/MainWindow.c classes/MainWindow_cl.h

classes/MailTextEdit.o: classes/MailTextEdit.c classes/MailTextEdit_cl.h

classes/Splashwindow.o: classes/Splashwindow.c classes/Splashwindow_cl.h

classes/StatusIconGroup.o: classes/StatusIconGroup.c classes/StatusIconGroup_cl.h

classes/Aboutwindow.o: classes/Aboutwindow.c classes/Aboutwindow_cl.h

classes/AttachmentGroup.o: classes/AttachmentGroup.c classes/AttachmentGroup_cl.h

classes/AttachmentImage.o: classes/AttachmentImage.c classes/AttachmentImage_cl.h

classes/SearchControlGroup.o: classes/SearchControlGroup.c classes/SearchControlGroup_cl.h

classes/Addrmatchlist.o: classes/Addrmatchlist.c classes/Addrmatchlist_cl.h \
	YAM.h YAM_addressbook.h YAM_config.h YAM_folderconfig.h \
	include/SDI_hook.h YAM_locale.h YAM_main.h YAM_mainFolder.h YAM_utilities.h YAM_write.h

classes/Searchwindow.o: classes/Searchwindow.c classes/Searchwindow_cl.h YAM.h \
	YAM_addressbook.h YAM_config.h YAM_folderconfig.h include/SDI_hook.h \
	YAM_locale.h YAM_main.h YAM_mainFolder.h YAM_utilities.h YAM_write.h

classes/Recipientstring.o: classes/Recipientstring.c classes/Recipientstring_cl.h \
	YAM.h YAM_addressbook.h YAM_config.h YAM_folderconfig.h \
	include/SDI_hook.h YAM_locale.h YAM_main.h YAM_mainFolder.h YAM_utilities.h YAM_write.h

classes/InfoBar.o: classes/InfoBar.c classes/InfoBar_cl.h \
	YAM.h YAM_addressbook.h YAM_config.h YAM_folderconfig.h \
	include/SDI_hook.h YAM_locale.h YAM_main.h YAM_mainFolder.h YAM_utilities.h YAM_write.h

classes/Classes.o: classes/Classes.c classes/Classes.h YAM.h YAM_addressbook.h \
	YAM_config.h YAM_folderconfig.h include/SDI_hook.h YAM_locale.h \
	YAM_main.h YAM_mainFolder.h YAM_utilities.h YAM_write.h

classes/YAM.o: classes/YAM.c classes/YAM_cl.h YAM.h YAM_addressbook.h \
	YAM_config.h YAM_folderconfig.h include/SDI_hook.h YAM_locale.h \
	YAM_main.h YAM_mainFolder.h YAM_utilities.h YAM_write.h
